var clickX_simple = new Array();
var clickY_simple = new Array();
var clickDrag_simple = new Array();
var paint_simple;
var canvas_simple;
var context_simple;
var canvasWidth = 800;
var canvasHeight = 400;
prepareSimpleCanvas();
/**
* Creates a canvas element.
*/
function prepareSimpleCanvas()
{
  // Create the canvas (Neccessary for IE because it doesn't know what a canvas element is)
  var canvasDiv = document.getElementById('canvasSimpleDiv');
  canvas_simple = document.createElement('canvas');
  canvas_simple.setAttribute('width', canvasWidth);
  canvas_simple.setAttribute('height', canvasHeight);
  canvas_simple.setAttribute('id', 'canvasSimple');
  canvasDiv.appendChild(canvas_simple);
  if(typeof G_vmlCanvasManager != 'undefined') {
    canvas_simple = G_vmlCanvasManager.initElement(canvas_simple);
  }
  context_simple = canvas_simple.getContext("2d");
  
  // Add mouse events
  // ----------------
  $('#canvasSimple').mousedown(function(e)
  {
    // Mouse down location
    var mouseX = e.pageX - this.offsetLeft;
    var mouseY = e.pageY - this.offsetTop;
    
    paint_simple = true;
    addClickSimple(mouseX, mouseY, false);
    redrawSimple();
  });
  
  $('#canvasSimple').mousemove(function(e){
    if(paint_simple){
      addClickSimple(e.pageX - this.offsetLeft, e.pageY - this.offsetTop, true);
      redrawSimple();
    }
  });
  
  $('#canvasSimple').mouseup(function(e){
    paint_simple = false;
      redrawSimple();
  });
  
  $('#canvasSimple').mouseleave(function(e){
    paint_simple = false;
  });
  
  $('#clearCanvasSimple').mousedown(function(e)
  {
    clickX_simple = new Array();
    clickY_simple = new Array();
    clickDrag_simple = new Array();
    clearCanvas_simple(); 
  });
}

function addClickSimple(x, y, dragging)
{
  clickX_simple.push(x);
  clickY_simple.push(y);
  clickDrag_simple.push(dragging);
}

function clearCanvas_simple()
{
  context_simple.fillStyle = '#ffffff'; // Work around for Chrome
  context_simple.fillRect(0, 0, canvasWidth, canvasHeight); // Fill in the canvas with white
  canvas_simple.width = canvas_simple.width; // clears the canvas 
}

function redrawSimple()
{
  clearCanvas_simple();
  
  var radius = 5;
  context_simple.strokeStyle = "#000000";
  context_simple.lineJoin = "round";
  context_simple.lineWidth = radius;
      
  for(var i=0; i < clickX_simple.length; i++)
  {   
    context_simple.beginPath();
    if(clickDrag_simple[i] && i){
      context_simple.moveTo(clickX_simple[i-1], clickY_simple[i-1]);
    }else{
      context_simple.moveTo(clickX_simple[i]-1, clickY_simple[i]);
    }
    context_simple.lineTo(clickX_simple[i], clickY_simple[i]);
    context_simple.closePath();
    context_simple.stroke();
  }
}
